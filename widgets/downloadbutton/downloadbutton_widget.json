{
  "widget_info": {
    "name": "downloadbutton",
    "display_name": "Download Button (CSV)",
    "version": "3.0.0",
    "author": "MaxLink Team",
    "description": "Widget de téléchargement d'archives CSV ultra-simplifié",
    "category": "interface",
    "tags": ["download", "archives", "csv", "traçabilité"]
  },
  "widget_config": {
    "size": {
      "width": 1,
      "height": 1,
      "resizable": false
    },
    "placement": {
      "suggested_position": "bottom-right",
      "priority": "high"
    },
    "style": {
      "theme_compatible": true,
      "uses_neumorphism": true,
      "reuses_rebootbutton_styles": true
    }
  },
  "functionality": {
    "description": "Téléchargement direct de fichiers CSV individuels ou multiple automatique",
    "features": [
      "Interface moderne avec popup modale",
      "Sélection de semaine avec aperçu",
      "Téléchargement individuel de fichiers CSV",
      "Téléchargement automatique de tous les CSV d'une semaine",
      "Gestion d'erreurs intégrée",
      "Notifications utilisateur",
      "Compatible avec download-manager.js"
    ],
    "download_modes": {
      "individual": "Téléchargement d'un seul fichier CSV sélectionné",
      "multiple": "Téléchargement automatique de tous les CSV d'une semaine"
    }
  },
  "backend_integration": {
    "system": "PHP ultra-simplifié",
    "apis": [
      {
        "endpoint": "/archives-list.php",
        "method": "GET",
        "description": "Liste des archives avec métadonnées détaillées",
        "response_format": "JSON"
      },
      {
        "endpoint": "/download-archive.php",
        "method": "GET",
        "description": "Téléchargement direct CSV ou liste pour téléchargement multiple",
        "parameters": [
          "file + year (téléchargement individuel)",
          "week + year (liste pour téléchargement multiple)"
        ]
      }
    ],
    "service_dependency": "php_archives",
    "note": "Plus de ZIP ! Téléchargement direct CSV uniquement"
  },
  "dependencies": {
    "files": [
      "download-manager.js (optionnel mais recommandé)",
      "assets/icons/download.svg"
    ],
    "services": [
      "nginx",
      "php_archives"
    ],
    "css_dependencies": [
      "Réutilise les classes rebootbutton existantes",
      "Variables CSS Nord theme"
    ]
  },
  "installation": {
    "service_order": [
      "nginx_install.sh",
      "php_archives_install.sh"
    ],
    "files_deployment": [
      "download-manager.js doit être accessible via HTTP",
      "Archives PHP doivent être installées et fonctionnelles"
    ],
    "testing": [
      "Vérifier que /archives-list.php retourne du JSON",
      "Vérifier que /download-archive.php fonctionne",
      "Tester les deux modes de téléchargement"
    ]
  },
  "user_experience": {
    "workflow": [
      "Clic sur le bouton de téléchargement",
      "Sélection d'une semaine dans la liste",
      "Choix du mode : fichier individuel OU tous les CSV",
      "Si individuel : sélection du fichier spécifique",
      "Si multiple : aperçu de tous les fichiers",
      "Téléchargement direct sans compression"
    ],
    "advantages": [
      "Plus de ZIP à extraire",
      "Accès immédiat aux données CSV",
      "Interface intuitive et moderne",
      "Gestion automatique des téléchargements multiples",
      "Compatible avec tous les navigateurs",
      "Performance optimale"
    ]
  },
  "technical_notes": {
    "compatibility": "Rétrocompatible avec l'interface existante",
    "performance": "Ultra-optimisé, zéro dépendance externe complexe",
    "maintenance": "Code simplifié, facile à maintenir",
    "future_proof": "Architecture modulaire, facilement extensible"
  }
}